{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agenticcoder.com/schemas/agents/@code-architect.output.schema.json",
  "title": "@code-architect Agent Output Schema",
  "description": "Output contract for the @code-architect agent",
  "type": "object",
  "required": ["agent_id", "phase", "output", "artifacts"],
  "properties": {
    "agent_id": {
      "type": "string",
      "const": "@code-architect",
      "description": "Agent identifier"
    },
    "phase": {
      "type": "integer",
      "const": 7,
      "description": "Phase completed"
    },
    "output": {
      "type": "object",
      "required": [
        "layer_architecture",
        "design_patterns_applied",
        "folder_structure"
      ],
      "properties": {
        "layer_architecture": {
          "type": "string",
          "enum": ["Layered", "Clean Architecture", "Hexagonal", "Onion"],
          "description": "Code organization pattern"
        },
        "design_patterns_applied": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "Repository Pattern",
              "Service Pattern",
              "Factory Pattern",
              "Observer Pattern",
              "Dependency Injection",
              "Strategy Pattern",
              "CQRS"
            ]
          },
          "minItems": 3,
          "description": "Design patterns used"
        },
        "folder_structure": {
          "type": "string",
          "description": "Code directory structure"
        },
        "module_boundaries": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {"type": "string"},
              "responsibility": {"type": "string"},
              "dependencies": {"type": "array", "items": {"type": "string"}}
            }
          },
          "description": "Module definitions and dependencies"
        },
        "api_contracts_defined": {
          "type": "boolean",
          "description": "Whether API contracts are documented"
        },
        "naming_conventions": {
          "type": "object",
          "properties": {
            "files": {"type": "string"},
            "classes": {"type": "string"},
            "functions": {"type": "string"}
          }
        }
      }
    },
    "artifacts": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "path", "artifact_type"],
        "properties": {
          "name": {"type": "string"},
          "path": {"type": "string"},
          "artifact_type": {
            "type": "string",
            "enum": [
              "code_structure_doc",
              "api_contracts_doc",
              "design_patterns_doc",
              "testing_strategy_doc"
            ]
          }
        }
      },
      "minItems": 2,
      "description": "Code architecture artifacts"
    },
    "handoff_to": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": ["@azure-architect", "@frontend-specialist", "@backend-specialist"]
      },
      "description": "Next agents in parallel branches"
    }
  }
}
