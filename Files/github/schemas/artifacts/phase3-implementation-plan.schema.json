{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agenticCoder.dev/schemas/artifacts/phase3-implementation-plan.schema.json",
  "title": "Phase 3 Implementation Plan Artifact",
  "description": "Validates the output artifacts from @coordinator agent (Phase 3) - implementation plan, phased breakdown, team assignments",
  "type": "object",
  "required": ["artifact_type", "agent_id", "phase", "plan_metadata", "phases"],
  "properties": {
    "artifact_type": {
      "type": "string",
      "const": "implementation_plan",
      "description": "Artifact category"
    },
    "agent_id": {
      "type": "string",
      "const": "@coordinator",
      "description": "Agent that produced this artifact"
    },
    "phase": {
      "type": "integer",
      "const": 3,
      "description": "Phase number in agent chain"
    },
    "plan_metadata": {
      "type": "object",
      "required": ["total_phases", "total_duration_weeks", "estimated_start_date", "estimated_delivery_date"],
      "properties": {
        "total_phases": {
          "type": "integer",
          "minimum": 3,
          "maximum": 12,
          "description": "Number of phases in implementation plan"
        },
        "total_duration_weeks": {
          "type": "number",
          "minimum": 2,
          "maximum": 120,
          "description": "Total project duration in weeks"
        },
        "estimated_start_date": {
          "type": "string",
          "format": "date",
          "description": "When implementation starts"
        },
        "estimated_delivery_date": {
          "type": "string",
          "format": "date",
          "description": "When project completes"
        },
        "team_velocity": {
          "type": "number",
          "minimum": 5,
          "description": "Story points per week (team capacity)"
        },
        "buffer_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 50,
          "description": "Risk buffer percentage (0-50%)"
        },
        "confidence_level": {
          "type": "string",
          "enum": ["Low", "Medium", "High"],
          "description": "Estimation confidence"
        }
      }
    },
    "phases": {
      "type": "array",
      "minItems": 3,
      "maxItems": 12,
      "items": {
        "type": "object",
        "required": ["phase_number", "phase_name", "duration_weeks", "story_points", "stories", "agents"],
        "properties": {
          "phase_number": {
            "type": "integer",
            "minimum": 1
          },
          "phase_name": {
            "type": "string",
            "minLength": 5,
            "maxLength": 100,
            "description": "Phase title (e.g., 'Foundation Setup')"
          },
          "description": {
            "type": "string",
            "maxLength": 500,
            "description": "Phase description and goals"
          },
          "duration_weeks": {
            "type": "number",
            "minimum": 0.5,
            "maximum": 12,
            "description": "How long this phase takes"
          },
          "story_points": {
            "type": "integer",
            "minimum": 0,
            "maximum": 500,
            "description": "Total story points in phase"
          },
          "stories": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^US-[0-9]{3,4}$"
            },
            "description": "User story IDs (US-001, US-002, etc.)"
          },
          "agents": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "enum": [
                "@architect",
                "@code-architect",
                "@azure-architect",
                "@bicep-specialist",
                "@frontend-specialist",
                "@backend-specialist",
                "@devops-specialist",
                "@qa",
                "@reporter"
              ]
            },
            "description": "Which agents handle this phase"
          },
          "dependencies": {
            "type": "array",
            "items": {
              "type": "integer",
              "minimum": 1
            },
            "description": "Phase numbers this phase depends on"
          },
          "deliverables": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "minItems": 1,
            "description": "What gets delivered in this phase"
          },
          "success_criteria": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "How to validate phase completion"
          }
        }
      },
      "description": "Detailed phase breakdown"
    },
    "critical_path": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Sequence of phases that cannot be compressed"
    },
    "parallel_tracks": {
      "type": "array",
      "items": {
        "type": "array",
        "items": {
          "type": "integer"
        }
      },
      "description": "Phase numbers that can run in parallel"
    },
    "assumptions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assumptions made in planning"
    },
    "risks": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "risk_name": {
            "type": "string"
          },
          "probability": {
            "type": "string",
            "enum": ["Low", "Medium", "High"]
          },
          "impact": {
            "type": "string",
            "enum": ["Low", "Medium", "High"]
          },
          "mitigation": {
            "type": "string"
          }
        }
      },
      "description": "Known risks and mitigations"
    },
    "team_structure": {
      "type": "object",
      "properties": {
        "total_team_size": {
          "type": "integer",
          "minimum": 1
        },
        "developers": {
          "type": "integer"
        },
        "team_composition": {
          "type": "string",
          "description": "Description of team roles and structure"
        }
      }
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "When this plan was created"
    }
  },
  "examples": [
    {
      "artifact_type": "implementation_plan",
      "agent_id": "@coordinator",
      "phase": 3,
      "plan_metadata": {
        "total_phases": 5,
        "total_duration_weeks": 12,
        "estimated_start_date": "2026-01-20",
        "estimated_delivery_date": "2026-04-13",
        "team_velocity": 20,
        "buffer_percentage": 20,
        "confidence_level": "High"
      },
      "phases": [
        {
          "phase_number": 1,
          "phase_name": "Foundation Setup",
          "duration_weeks": 2,
          "story_points": 25,
          "stories": ["US-001", "US-002", "US-003"],
          "agents": ["@architect", "@code-architect"],
          "deliverables": ["Architecture decisions", "Code structure"],
          "success_criteria": ["5+ ADRs documented", "Folder structure approved"]
        },
        {
          "phase_number": 2,
          "phase_name": "Core Features",
          "duration_weeks": 4,
          "story_points": 45,
          "stories": ["US-004", "US-005", "US-006"],
          "agents": ["@frontend-specialist", "@backend-specialist"],
          "dependencies": [1],
          "deliverables": ["Frontend components", "Backend API"],
          "success_criteria": ["10+ components", "8+ endpoints"]
        }
      ],
      "critical_path": ["Phase 1", "Phase 2", "Phase 3"],
      "parallel_tracks": [[2, 3]],
      "assumptions": ["No external dependencies", "Team stable"],
      "risks": [
        {
          "risk_name": "Scope creep",
          "probability": "High",
          "impact": "High",
          "mitigation": "Strict change control"
        }
      ],
      "team_structure": {
        "total_team_size": 5,
        "developers": 3,
        "team_composition": "3 full-stack developers, 1 designer, 1 PM"
      },
      "created_at": "2026-01-13T10:30:00Z"
    }
  ]
}
