{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "react-components.artifact.schema.json",
  "title": "React Components Artifact Schema",
  "description": "Schema for react-components artifact type generated by @react-specialist",
  "type": "object",
  "required": [
    "artifact_id",
    "artifact_type",
    "metadata",
    "content",
    "validation"
  ],
  "properties": {
    "artifact_id": {
      "type": "string",
      "pattern": "^artifact-react-comp-",
      "description": "Unique artifact identifier"
    },
    "artifact_type": {
      "type": "string",
      "const": "react-components",
      "description": "Must be 'react-components'"
    },
    "artifact_version": {
      "type": "string",
      "default": "1.0",
      "description": "Artifact schema version"
    },
    "schema_version": {
      "type": "string",
      "default": "1.0"
    },
    "metadata": {
      "type": "object",
      "required": ["phase", "agent_id", "created_at", "project_id"],
      "properties": {
        "phase": {
          "type": "integer",
          "const": 13
        },
        "agent_id": {
          "type": "string",
          "const": "@react-specialist"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "created_by": {
          "type": "string",
          "description": "Handoff ID that created this artifact"
        },
        "project_id": {
          "type": "string",
          "pattern": "^proj-"
        },
        "status": {
          "type": "string",
          "enum": ["active", "deprecated", "archived"],
          "default": "active"
        }
      }
    },
    "dependencies": {
      "type": "object",
      "properties": {
        "required": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["artifact_id", "artifact_type"],
            "properties": {
              "artifact_id": {
                "type": "string"
              },
              "artifact_type": {
                "type": "string"
              },
              "reason": {
                "type": "string"
              }
            }
          }
        },
        "optional": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "content": {
      "type": "object",
      "required": ["components"],
      "properties": {
        "components": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["name", "file_path", "code"],
            "properties": {
              "name": {
                "type": "string",
                "pattern": "^[A-Z][a-zA-Z0-9]*$"
              },
              "file_path": {
                "type": "string",
                "pattern": ".*\\.tsx?$"
              },
              "component_type": {
                "type": "string",
                "enum": ["functional", "class", "wrapper"]
              },
              "code": {
                "type": "string",
                "minLength": 50
              },
              "code_length_lines": {
                "type": "integer"
              },
              "hooks_used": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": ["useState", "useEffect", "useContext", "useReducer", "useCallback", "useMemo", "useRef", "useImperativeHandle", "useLayoutEffect", "useDebugValue"]
                }
              },
              "custom_hooks": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "props_interface": {
                "type": "string"
              },
              "state_variables": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "event_handlers": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "imports": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "dependencies": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "test_file": {
                "type": "string",
                "pattern": ".*\\.test\\.tsx?$"
              },
              "test_cases": {
                "type": "integer"
              },
              "accessibility_features": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "performance_optimizations": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            }
          }
        },
        "custom_hooks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "pattern": "^use[A-Z]"
              },
              "file_path": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "code": {
                "type": "string"
              },
              "code_length_lines": {
                "type": "integer"
              },
              "returns": {
                "type": "string"
              }
            }
          }
        },
        "context_providers": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "file_path": {
                "type": "string"
              },
              "provides": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "code": {
                "type": "string"
              }
            }
          }
        },
        "generated_files": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "validation": {
      "type": "object",
      "required": ["status", "timestamp"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["passed", "passed_with_warnings", "failed"]
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "checks": {
          "type": "object",
          "properties": {
            "typescript_errors": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": ["passed", "failed"]
                },
                "value": {
                  "type": "integer",
                  "minimum": 0
                },
                "threshold": {
                  "type": "integer",
                  "const": 0
                }
              }
            },
            "eslint_warnings": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": ["passed", "failed"]
                },
                "value": {
                  "type": "integer",
                  "minimum": 0
                },
                "threshold": {
                  "type": "integer",
                  "const": 0
                }
              }
            },
            "tests_passing": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": ["passed", "failed"]
                },
                "value": {
                  "type": "boolean"
                }
              }
            },
            "coverage_percentage": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": ["passed", "failed"]
                },
                "value": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                },
                "threshold": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100
                }
              }
            },
            "accessibility_violations": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string",
                  "enum": ["passed", "failed"]
                },
                "value": {
                  "type": "integer",
                  "minimum": 0
                },
                "threshold": {
                  "type": "integer",
                  "const": 0
                }
              }
            }
          }
        }
      }
    },
    "quality_metrics": {
      "type": "object",
      "properties": {
        "total_lines": {
          "type": "integer"
        },
        "cyclomatic_complexity": {
          "type": "number"
        },
        "maintainability_index": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "bundle_impact_kb": {
          "type": "number"
        }
      }
    },
    "recommendations": {
      "type": "array",
      "items": {
        "type": "string"
      }
    }
  }
}
