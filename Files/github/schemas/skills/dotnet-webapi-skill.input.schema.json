{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "dotnet-webapi-skill.input.schema.json",
  "title": ".NET Web API Skill Input Schema",
  "description": "Input schema for dotnet-webapi skill - defines what information needed for API design guidance",
  "type": "object",
  "required": [
    "skill_id",
    "agent_id",
    "context",
    "question"
  ],
  "properties": {
    "skill_id": {
      "type": "string",
      "const": "dotnet-webapi",
      "description": "Must be 'dotnet-webapi'"
    },
    "agent_id": {
      "type": "string",
      "pattern": "^@dotnet-specialist$",
      "description": "Agent requesting the skill"
    },
    "context": {
      "type": "object",
      "required": ["phase", "project_id"],
      "properties": {
        "phase": {
          "type": "integer",
          "const": 14
        },
        "project_id": {
          "type": "string",
          "pattern": "^proj-"
        },
        "net_version": {
          "type": "string",
          "enum": ["6.0", "7.0", "8.0"]
        },
        "api_scope": {
          "type": "string",
          "enum": ["microservice", "monolith", "backend_for_frontend"]
        }
      }
    },
    "question": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "controller_design",
            "error_handling",
            "authentication",
            "dependency_injection",
            "performance",
            "testing_strategy",
            "api_versioning"
          ]
        },
        "endpoints_to_design": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "method": {
                "type": "string",
                "enum": ["GET", "POST", "PUT", "PATCH", "DELETE"]
              },
              "path": {
                "type": "string",
                "description": "API path (e.g., '/api/users/{id}')"
              },
              "description": {
                "type": "string"
              }
            }
          },
          "minItems": 1
        },
        "data_models": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "properties": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string"
                    },
                    "required": {
                      "type": "boolean"
                    }
                  }
                }
              }
            }
          }
        },
        "authentication_required": {
          "type": "boolean"
        },
        "auth_type": {
          "type": "string",
          "enum": ["JWT", "OAuth2", "API_Key", "IdentityServer", "AzureAD", "None"]
        },
        "error_scenarios": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "validation_errors",
              "not_found",
              "unauthorized",
              "forbidden",
              "conflict",
              "rate_limiting"
            ]
          }
        },
        "performance_requirements": {
          "type": "object",
          "properties": {
            "expected_qps": {
              "type": "integer",
              "description": "Queries per second"
            },
            "response_time_ms": {
              "type": "integer",
              "description": "Target response time in milliseconds"
            }
          }
        }
      }
    },
    "architectural_context": {
      "type": "object",
      "properties": {
        "database_orm": {
          "type": "string",
          "enum": ["Entity Framework Core", "Dapper", "SQL", "NoSQL"]
        },
        "caching_strategy": {
          "type": "string",
          "enum": ["none", "in_memory", "redis"]
        },
        "message_queue": {
          "type": "string",
          "enum": ["none", "rabbitmq", "service_bus", "kafka"]
        },
        "api_documentation": {
          "type": "string",
          "enum": ["swagger", "openapi", "none"]
        },
        "cors_required": {
          "type": "boolean"
        },
        "rate_limiting_required": {
          "type": "boolean"
        }
      }
    },
    "team_context": {
      "type": "object",
      "properties": {
        "team_experience": {
          "type": "string",
          "enum": ["junior", "intermediate", "senior"]
        },
        "testing_maturity": {
          "type": "string",
          "enum": ["none", "basic", "comprehensive"]
        }
      }
    }
  }
}
